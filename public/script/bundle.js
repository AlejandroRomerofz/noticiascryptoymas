(()=>{"use strict";const e=class{container;loadingContainer;loadingIcon;constructor(e){if(this.container=document.querySelector(e),!this.container)throw new Error("No existe el container");this.loadingContainer=this.container.querySelector(".loading"),this.loadingContainer?(this.loadingIcon=this.loadingContainer.querySelector(".loading-icon"),this.loadingIcon||this.createIcon()):this.createLoading(),console.log(this.loadingContainer),console.log(this.loadingIcon)}createLoading(){const e=document.createElement("div");e.classList.add("loading");const t=document.createElement("i");t.classList.add("loading-icon"),t.classList.add("fa-solid"),t.classList.add("fa-circle-notch"),t.classList.add("fa-spin"),e.appendChild(t),this.loadingContainer=e,this.container.appendChild(e)}createIcon(){const e=document.createElement("i");e.classList.add("loading-icon"),e.classList.add("fa-solid"),e.classList.add("fa-circle-notch"),e.classList.add("fa-spin"),this.loadingContainer.appendChild(e)}startLoading(){this.loadingContainer.classList.contains("show")||this.loadingContainer.classList.add("show")}stopLoading(){this.loadingContainer.classList.contains("show")&&this.loadingContainer.classList.remove("show")}},t=class{URL="https://noticiascriptoymas.com/api/news";modesTraduction={all:0,altcoin:1,bitcoin:2,blockchain:3,ethereum:4,economy:5,bolsa:6,economy_investing:7,bolsa_2:8,inmobiliario:9};getNews(e=["all"],t=-1,n=0,o=!1){const s=[];e.forEach((e=>{if(console.log(e),null==this.modesTraduction[e])return!1;s.push(this.modesTraduction[e])})),console.log(s);const i=this.URL;return new Promise(((e,c)=>{fetch(i,{method:"POST",body:JSON.stringify({mode:s,lang:"es"})}).then((e=>e.json())).then((e=>{const t=e.result;var n=[];return t?(t.map((e=>{n=n.concat(...(new window.DOMParser).parseFromString(e,"text/xml").querySelectorAll("item"))})),console.log(n),n):(c("Error parameters"),!1)})).then((s=>{s||c("Error");var i=[];s.forEach((e=>{const t=this.parseJSON(e);t&&i.push(t)})),i.sort(((e,t)=>e.date.getTime()<t.date.getTime()?1:e.date.getTime()>t.date.getTime()?-1:0)),console.log(i);const a=i.slice(n,n+t);e(o?[a,i.length]:a)})).catch((e=>{c(e)}))}))}parseJSON(e){const t={};console.log(e);try{t.title=e.querySelector("title").textContent,t.image=e.querySelector("enclosure")?e.querySelector("enclosure").getAttribute("url"):e.querySelector("content").getAttribute("url"),t.date=new Date(e.querySelector("pubDate").textContent),t.link=e.querySelector("link").textContent}catch(e){return console.log(e),!1}return t}createNewsElement(e,t){const n=document.createElement("a");n.classList.add("cont-new"),n.target="_blank",n.href=t.link;const o=document.createElement("img");o.classList.add("new-img"),o.src=t.image,n.appendChild(o);const s=document.createElement("div");s.classList.add("content");const i=document.createElement("p");i.classList.add("title"),i.textContent=t.title,s.appendChild(i);const c=document.createElement("p");c.classList.add("description"),c.textContent=t.description,s.appendChild(c),n.appendChild(s),e.append(n)}},n=class{newsPerPage=12;totalPages=1;types=[];page=1;newsContainer;pagination;init(){this.createNews(),this.pagination=new class{parentContainer;container=document.createElement("div");pageNumber;onSelectedChange=()=>{};constructor(e,t){this.parentContainer=e,this.pageNumber=t,this.createLayout(),this.setSelected(1)}setSelected(e){const t=e-1,n=this.container.childNodes[t];if(!n)return!1;const o=this.container.querySelector(".selected");o&&o.classList.remove("selected"),n.classList.add("selected"),this.onSelectedChange(e)}setPageNumber(e){this.pageNumber=e,this.recreateLayout()}createLayout(){this.container=document.createElement("div"),this.container.classList.add("pagination-menu");for(var e=1;e<=this.pageNumber;e++){const t=document.createElement("p");t.textContent=e,t.addEventListener("click",(e=>{this.setSelected(parseInt(e.target.textContent))})),this.container.append(t)}this.parentContainer.append(this.container)}recreateLayout(){for(var e=this.container.childNodes.length+1;e<=this.pageNumber;e++){const t=document.createElement("p");t.textContent=e,t.addEventListener("click",(e=>{this.setSelected(parseInt(e.target.textContent))})),this.container.append(t)}}}(this.newsContainer.parentElement,this.totalPages),this.pagination.onSelectedChange=e=>{console.log(e),this.page=e,this.createNews()}}createNews(){this.resetContainer();const n=new e("#"+this.newsContainer.id);n.startLoading(),(new t).getNews(this.types,this.newsPerPage,(this.page-1)*this.newsPerPage,!0).then((e=>{this.totalPages=Math.ceil(e[1]/this.newsPerPage),this.pagination.setPageNumber(this.totalPages),e[0].map((e=>{(new t).createNewsElement(this.newsContainer,e)})),n.stopLoading()}))}resetContainer(){this.newsContainer.querySelectorAll(".cont-new").forEach((e=>{e.remove()}))}pageUp(){this.page=this.page+1,this.onPageChange()}pageDown(){0!=this.page&&(this.spage=this.page-1),this.onPageChange()}onPageChange(){this.createNews()}},o=class extends n{types=["bitcoin"];newsContainer=document.querySelector("#bitcoin_news")},s=class extends n{types=["bolsa","bolsa_2"];newsContainer=document.querySelector("#bolsa_news")},i=class{token="8a04021d-4ffb-457a-83fa-f16f8cdafff0";cryptoList="https://api.livecoinwatch.com/coins/list";coinList="https://api.livecoinwatch.com/fiats/all";headers=new Headers({"content-type":"application/json","x-api-key":this.token});getAllCrypto(e=50,t="USD",n=0){return fetch(this.cryptoList,{method:"POST",headers:this.headers,body:JSON.stringify({currency:t,sort:"rank",order:"ascending",offset:n,limit:e,meta:!0})}).then((e=>e.json()))}getAllCoins(){return fetch(this.coinList,{method:"POST",headers:this.headers,body:JSON.stringify({})}).then((e=>e.json()))}coinListPromise(e,t){}};class c{header=document.querySelector("#main_header");headerSustitute=document.querySelector("#header_sustitute");topOfPage=document.querySelector("#top_of_page");options=document.querySelectorAll(".mh-nav-option");openMobileMenuButton=document.querySelector("#menu_open_button");mobileMenu=document.querySelector("#mobile_menu_container");blackScreen=document.querySelector("#black_screen");searchContainer=document.querySelector("#search_container");searchOpenButton=document.querySelector("#search_open_button");searchCloseButton=document.querySelector("#search_close_button");searchButton=document.querySelector("#search_button");init(){this.initMobileMenu(),this.addHoverEventToOptions(),this.createIntersectionObserver(),this.createSearchEvents()}initMobileMenu(){this.blackScreen.addEventListener("click",(()=>{this.mobileMenuClose()})),this.openMobileMenuButton.addEventListener("click",(()=>{this.mobileMenuOpen()}))}mobileMenuOpen(){this.mobileMenu.classList.contains("show")||this.mobileMenu.classList.add("show"),this.blackScreen.classList.contains("show")||this.blackScreen.classList.add("show")}mobileMenuClose(){this.mobileMenu.classList.contains("show")&&this.mobileMenu.classList.remove("show"),this.blackScreen.classList.contains("show")&&this.blackScreen.classList.remove("show")}addHoverEventToOptions(){this.options.forEach((e=>{e.addEventListener("mouseover",(t=>{this.showDropMenu(e)})),e.addEventListener("mouseleave",(t=>{this.hideDropMenu(e)}))}))}hideDropMenu(e){const t=e.querySelector(".mh-option-drop");t.classList.contains("show")&&t.classList.remove("show")}showDropMenu(e){e.querySelector(".mh-option-drop").classList.add("show")}createIntersectionObserver(){new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting?this.convertToBigHeader():this.convertToSmallHeader()}))})).observe(this.topOfPage)}convertToSmallHeader(){this.header.classList.contains("small")||(this.header.classList.add("small"),this.headerSustitute.classList.add("show"))}convertToBigHeader(){this.header.classList.contains("small")&&(this.header.classList.remove("small"),this.headerSustitute.classList.remove("show"))}createSearchEvents(){this.searchOpenButton.addEventListener("click",(()=>{this.showSearchContainer()})),this.searchCloseButton.addEventListener("click",(()=>{this.hideSearchContainer()}))}showSearchContainer(){this.searchContainer.classList.contains("show")||this.searchContainer.classList.add("show")}hideSearchContainer(){this.searchContainer.classList.contains("show")&&this.searchContainer.classList.remove("show")}}class a{container=document.querySelector("#cont_bestcrypto");init(){this.initTopCoins(),this.initCalculator(),this.getTopNews()}initTopCoins(){const t=new e(".cont-bestcrypto");t.startLoading(),(new i).getAllCrypto(10).then((e=>{t.stopLoading(),e.map((e=>{this.createTopCoinsElements(e)}))}))}createTopCoinsElements(e){const t=document.createElement("a");t.classList.add("bc-crypto");const n=document.createElement("img");n.classList.add("bcc-image"),n.src=e.webp32;const o=document.createElement("div");o.classList.add("bcc-title");const s=document.createElement("p");s.classList.add("bcc-small-title"),s.textContent=e.code;const i=document.createElement("p");i.classList.add("bcc-big-title"),i.textContent=e.name,o.append(s),o.append(i);const c=document.createElement("div");c.classList.add("bcc-value");const a=document.createElement("p");a.classList.add("bcv-coin-value"),a.textContent=`${e.rate.toFixed(2)}$`;const r=document.createElement("div");r.classList.add("bcv-evo");const l=document.createElement("p");l.classList.add("bcve-percentage"),l.textContent=e.delta.month.toFixed(2)+"%";const d=document.createElement("p");d.classList.add("bcve-time"),d.textContent="last month",r.append(l),r.append(d),c.append(a),c.append(r),t.append(n),t.append(o),t.append(c),this.container.append(t)}valueInput=document.querySelector("#cc_value");selectors=document.querySelector(".cc-selectors");coinsSelect=document.querySelector("#coin_selector");cryptoSelect=document.querySelector("#crypto_selector");fromOutput=document.querySelector("#from_output");toOutput=document.querySelector("#to_output");switchButton=document.querySelector("#crypto_switch");convertor=new CryptoConvert;calculator=new class{coin="USD";crypto="BTC";mode=0;inputData;convertor;fromOutput;toOutput;constructor(e,t,n,o){this.fromOutput=t,this.toOutput=n,this.convertor=o,this.calculate(1),e.addEventListener("keyup",(e=>{if(""==e.target.value)return this.calculate(0),!1;this.calculate(e.target.value)})),this.inputData=e}setCoin(e){this.coin=e,this.inputData.value="",this.calculate(0)}setCrypto(e){this.crypto=e,this.inputData.value="",this.calculate(0)}switchMode(){0==this.mode?this.mode=1:this.mode=0,this.calculate(0)}calculate(e){var t=()=>{};0==this.mode?(Object.entries(this.convertor).map((e=>{e[0]==this.crypto&&(t=e[1][this.coin])})),this.fromOutput.textContent=`${e.toLocaleString("es-ES")} ${this.crypto}`,this.toOutput.textContent=`${t(e)>0?parseFloat(t(e).toFixed(2)).toLocaleString("es-ES"):0} ${this.coin}`):(Object.entries(this.convertor).map((e=>{e[0]==this.coin&&(t=e[1][this.crypto])})),this.fromOutput.textContent=`${e.toLocaleString("es-ES")} ${this.coin}`,this.toOutput.textContent=`${t(e)>0?parseFloat(t(e).toFixed(2)).toLocaleString("es-ES"):0} ${this.crypto}`)}}(this.valueInput,this.fromOutput,this.toOutput,this.convertor);initCalculator(){this.addOptions(),this.switchButtonInit(),this.coinsSelect.addEventListener("change",(e=>{this.calculator.setCoin(e.target.value)})),this.cryptoSelect.addEventListener("change",(e=>{this.calculator.setCrypto(e.target.value)}))}switchButtonInit(){this.switchButton.addEventListener("click",(()=>{this.selectors.classList.toggle("inverse"),this.calculator.switchMode()}))}addOptions(){this.convertor.ready().then((()=>{for(var e in this.convertor.cryptoInfo){const t=this.convertor.cryptoInfo[e];this.addCryptoOption(t)}this.calculator.setCrypto(this.cryptoSelect.value)})),(new i).getAllCoins().then((e=>{e.map((e=>{this.convertor.list.fiat.includes(e.code)&&this.addCoinOption(e)})),this.calculator.setCoin(this.coinsSelect.value)}))}addCoinOption(e){const t=document.createElement("option");t.value=e.code,"EUR"==e.code&&t.setAttribute("selected","true"),t.textContent=`${e.code} ${e.name}`,this.coinsSelect.appendChild(t)}addCryptoOption(e){const t=document.createElement("option");t.value=e.symbol,t.textContent=`${e.symbol} ${e.title}`,this.cryptoSelect.appendChild(t)}getTopNews(){const n=new e(".cont-news");n.startLoading(),(new t).getNews(["all"],8).then((e=>{this.createNewsElements(e),n.stopLoading()})).catch((()=>{this.errorElement(),n.stopLoading()}))}errorElement(){const e=document.getElementById("news_container"),t=document.createElement("p");t.classList.add("text-error"),t.textContent="Ha ocurrido un error al obtener las noticias",e.appendChild(t)}createNewsElements(e){const n=document.getElementById("news_container");e.forEach((e=>{(new t).createNewsElement(n,e)}))}}const r=class extends n{types=["economy","economy_investing"];newsContainer=document.querySelector("#economy_news")},l=class extends n{types=["bitcoin","blockchain","ethereum"];newsContainer=document.querySelector("#crypto_news")},d=class extends n{types=["inmobiliario"];newsContainer=document.querySelector("#estate_news")};window.addEventListener("DOMContentLoaded",(()=>{!function(){var e=window.location.pathname;"/"==e.substring(e.length-1)&&(e=e.substring(0,e.length-1)),(new c).init(),console.log(e);const t=h[e];null!=t&&t()}()}));const h={"/hola":function(){console.log("aaaa")},"":function(){(new a).init()},"/graphics/crypto":function(){(new class{graphicContainer=document.querySelector(".graphics-container");viewMoreButton=document.querySelector("#view_more");page=1;init(){this.viewMoreInit(),this.getCryptos(4,0)}viewMoreInit(){this.viewMoreButton.addEventListener("click",(()=>{this.page++,this.getCryptos(4,4*this.page)}))}getCryptos(t,n){const o=new e(".graphics-container");o.startLoading(),(new i).getAllCrypto(t,"USD",n).then((e=>{e.map((e=>{this.createWidget(this.graphicContainer,e.name,e.code)})),o.stopLoading()}))}createWidget(e,t,n,o){const s=document.createElement("div");s.classList.add("graphic");const i=document.createElement("p");i.textContent=t,i.classList.add("font-bold");const c=document.createElement("iframe");c.src=`https://bit2me.com/widget/chart/v1?currency=${n}&fiat=USD`,c.setAttribute("frameborder","0"),s.append(i),s.append(c),e.append(s)}}).init()},"/news/bitcoin":function(){(new o).init()},"/news/exchange":function(){(new s).init()},"/news/economy":function(){(new r).init()},"/news/crypto":function(){(new l).init()},"/news/estate":function(){(new d).init()},"/crypto/all":function(){(new class{container=document.querySelector("#crypto_container");init(){this.getCryptoElements()}getCryptoElements(){const t=new e("#"+this.container.id);t.startLoading(),(new class{url="https://noticiascriptoymas.com/api/crypto";getAll(){return new Promise(((e,t)=>{fetch(this.url,{method:"POST"}).then((e=>e.json())).then((t=>{e(t)})).catch((e=>{t(e)}))}))}}).getAll().then((e=>{console.log(e);for(const t of Object.entries(e))this.createCryptoElement(t[1]);t.stopLoading()}))}createCryptoElement(e){const t=document.createElement("a");t.classList.add("ac-crypto"),t.href="/crypto?code="+e.symbol;const n=document.createElement("img");n.src=e.logo;const o=document.createElement("p");o.classList.add("symbol"),o.textContent=e.symbol;const s=document.createElement("p");s.classList.add("title"),s.textContent=e.title;const i=document.createElement("div");i.classList.add("acc-content"),i.appendChild(n),i.appendChild(o),i.appendChild(s),t.append(i),this.container.append(t)}}).init()}}})();